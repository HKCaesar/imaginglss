<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to ImagingLSS’s documentation! &mdash; ImagingLSS 0.9 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ImagingLSS 0.9 documentation" href="#" />
    <link rel="next" title="model package" href="model.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model.html" title="model package"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">ImagingLSS 0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-imaginglss-s-documentation">
<h1>Welcome to ImagingLSS&#8217;s documentation!<a class="headerlink" href="#welcome-to-imaginglss-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<p>This is a data model of the DECAM imaging survey data
and potentially also for other desi targeting imaging survey,
for Large scale structure analysis.</p>
<p>The modelled data is a product from the Tractor, the source identification
software used in by DESI.</p>
<p>We have support on the <a class="reference external" href="https://desi.lbl.gov/trac/wiki/DecamLegacy/EDRfiles">Early Data Release (EDR) data</a>
and <a class="reference external" href="https://desi.lbl.gov/trac/wiki/DecamLegacy/DR1">DR1</a> .</p>
<p>To use this imaing data model on edison:</p>
<ol class="arabic simple">
<li>set environments</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">export </span><span class="nv">DECALS_IMAGING</span><span class="o">=</span>/global/project/projectdirs/cosmo/work/decam/release/edr/
<span class="nb">export </span><span class="nv">DECALS_CACHE</span><span class="o">=</span><span class="nv">$GSCRATCH</span>/desicache
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>install astropy or fitsio (prefered)</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre>easy_install --user fitsio
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash"><div class="highlight"><pre>easy_install --user astropy
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>try if usecase.py runs.</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre>python usecase.py
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>start hacking with</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre>from model.datarelease import DataRelease
<span class="nv">dr</span> <span class="o">=</span> DataRelease<span class="o">()</span>
</pre></div>
</div>
<p>Due to internal caching of the catalogue, the running time is faster after first time.</p>
<p>Documentation of the modelling can be seen in model/README.md</p>
<p>We are working on a more comprehensive documentation generated from
source code doc strings. The current version of the document is at</p>
<p><a class="reference external" href="http://desihub.github.io/imaginglss">http://desihub.github.io/imaginglss</a></p>
<p>Examples:</p>
<blockquote>
<div><ul class="simple">
<li>edison_example.sh</li>
<li>mpirandom.py</li>
<li>usecase.py</li>
<li>select_elgs.py</li>
<li>footprint_mangle.py</li>
<li>build_sfdmap.py</li>
</ul>
</div></blockquote>
<div class="section" id="known-issues">
<h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<p>If the data release has updated (rare but it happened),
and the cache files are out of date.
Run forget_cache.py to clear the cache.</p>
</div>
<div class="section" id="description-of-model-used-to-process-decals-imaging-data">
<h2>Description of model used to process DECALS imaging data.<a class="headerlink" href="#description-of-model-used-to-process-decals-imaging-data" title="Permalink to this headline">¶</a></h2>
<p>The DECALS imaging data are processed in &#8220;Brick&#8221;s on the sky,
each Brick being a small, contiguous regions of sky (roughly
0.5x0.5 degrees).  The data, including information on depths,
extinction, etc. are stored in pixelized images within the
FITS files.  There are also catalogs of objects, produced by
Tractor, which are associated with each brick.</p>
<p>The main way to access the DECALS imaging data is via DataRelease
objects defined in &#8220;datarelease.py&#8221;. Important attributes are</p>
<blockquote>
<div><ul class="simple">
<li>DataRelease.footprint : the survey footprint.</li>
<li>DataRelease.brickindex: the Brick geometry (BrickIndex)</li>
<li>DataRelease.images    : the images released in the DR</li>
<li>DataRelease.catalogue : the imaging catalogue reported by tractor</li>
</ul>
</div></blockquote>
<p>The member methods are</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>DataRelease.readout <span class="classifier-delimiter">:</span> <span class="classifier">reading out pixel value of an image</span></dt>
<dd><p class="first last">for coordinates on the sky.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Catalog information is handled by catalog.Catalogue, which stores the
object catalogs associated with a data release.
The catalogs are contained in many small FITS files,
but this class caches the
information for speed and only columns that are accessed are loaded
into memory. Use &#8216;forget_cache.py&#8217; to clear this cache.</p>
<p>The images are represented by imagerepo.ImageRepo objects.
An ImageRepo object takes care of reading the image tile of a Brick.
An image tile contains a padded region around the Brick,
which is sometimes mentioned as a margin, a padding, or a bleeding region.</p>
<p>A DataRelease has several image repositories, for example,</p>
<blockquote>
<div><ul class="simple">
<li>DataRelease.images[&#8216;depth&#8217;][&#8216;u&#8217;] : the &#8216;u&#8217; band inverse variance depth images</li>
<li>DataRelease.images[&#8216;image&#8217;][&#8216;u&#8217;] : the coadded &#8216;u&#8217; band image in nanomaggies</li>
<li>DataRelease.images[&#8216;model&#8217;][&#8216;u&#8217;] : the model &#8216;u&#8217; band image in nanomaggies;</li>
</ul>
</div></blockquote>
<p>or what tractor thinks the sky looks like.</p>
<p>brick.Brick holds metadata for each Brick, including the central &#8216;ra&#8217;,
&#8216;dec&#8217;, and the primary area covered by the brick, excluding the padding regsions. There are routines for converting from sky coordinates to image
pixels within each brick, and routines for querying the images
handled by imagerepo.</p>
<p>brickindex.BrickIndex holds the metadata
of of the brick decomposition scheme.
There are routines for converting from
sky coordinates to bricks, and acts as a factory that creates Brick
objects.</p>
<p>Helper routines. In order to reduce the number of dependecies,
we implemented a few coordinate transformations</p>
<blockquote>
<div><ul class="simple">
<li>wcs_tangent impments the WCS tangent format.</li>
<li>wcs_simplezea implement the WCS ZEA format, oriented at north / south pole</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="model">
<h1>model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="model.html">model package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="model.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="model.utils.html">model.utils package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="model.utils.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="model.utils.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="model.utils.html#module-model.utils">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="model.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="model.brick.html">model.brick module</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.brickindex.html">model.brickindex module</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.catalogue.html">model.catalogue module</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.datarelease.html">model.datarelease module</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.imagerepo.html">model.imagerepo module</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.schema.html">model.schema module</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.sfdmap.html">model.sfdmap module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="model.html#module-model">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span>Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span>Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span>Search Page</span></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to ImagingLSS&#8217;s documentation!</a><ul>
<li><a class="reference internal" href="#known-issues">Known Issues</a></li>
<li><a class="reference internal" href="#description-of-model-used-to-process-decals-imaging-data">Description of model used to process DECALS imaging data.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modules">Modules</a></li>
<li><a class="reference internal" href="#model">model</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="model.html"
                        title="next chapter">model package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model.html" title="model package"
             >next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">ImagingLSS 0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Yu Feng, Martin White.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.
    </div>
  </body>
</html>